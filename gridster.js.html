<!DOCTYPE html>
<!-- saved from url=(0049)http://gridster.net/demos/dynamic-grid-width.html -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Demo » Dynamic grid width » gridster.js</title>
    <link rel="stylesheet" type="text/css" href="./gridster.js_files/jquery.gridster.css">
    <link rel="stylesheet" type="text/css" href="./gridster.js_files/demo.css">

    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.10/css/jquery.dataTables.min.css">


</head>
<body>
    <h1>Dynamic grid width</h1>

    <div id="divInfo1" style="font-size: small; font-weight: normal; color: #9DA4FF;">Cursor info:</div>

    <div id="divGridster" class="gridster ready" style="background-color: #EFEFEF;">
        <div id="fantom" style="position: absolute; height: 100%; width: 100%; background-color: transparent; transition: transform 0.0s; transform: scale(1) translate(0px, 0px); "></div>
        <ul id="ulGridster" style="height: 100%; width: 100%; background-color: transparent; transition: transform 0.6s cubic-bezier(0.2, 0.6, 0.3, 1.0); transform: scale(1) translate(0px, 0px); ">
            <li data-row="1" data-col="1" data-sizex="2" data-sizey="2" class="gs-w">0<span class="gs-resize-handle gs-resize-handle-both"></span></li>
            <li data-row="1" data-col="3" data-sizex="1" data-sizey="2" class="gs-w">1<span class="gs-resize-handle gs-resize-handle-both"></span></li>
            <li data-row="1" data-col="4" data-sizex="1" data-sizey="1" class="gs-w">2<span class="gs-resize-handle gs-resize-handle-both"></span></li>
            <li data-row="1" data-col="1" data-sizex="3" data-sizey="1" class="gs-w player-revert" style="position: absolute;">3<span class="gs-resize-handle gs-resize-handle-both"></span></li>
            <li data-row="4" data-col="1" data-sizex="1" data-sizey="1" class="gs-w">4<span class="gs-resize-handle gs-resize-handle-both"></span></li>
            <li data-row="3" data-col="1" data-sizex="1" data-sizey="1" class="gs-w">5<span class="gs-resize-handle gs-resize-handle-both"></span></li>
            <li data-row="3" data-col="2" data-sizex="1" data-sizey="1" class="gs-w">6<span class="gs-resize-handle gs-resize-handle-both"></span></li>
            <li data-row="4" data-col="2" data-sizex="1" data-sizey="1" class="gs-w">7<span class="gs-resize-handle gs-resize-handle-both"></span></li>
            <li data-row="2" data-col="4" data-sizex="1" data-sizey="1" class="gs-w">8<span class="gs-resize-handle gs-resize-handle-both"></span></li>
            <li data-row="1" data-col="8" data-sizex="17" data-sizey="8" class="gs-w">
                <div class="content1" style="width: 99%;height: 99%; margin-left:5px; margin-top:20px;">
                    <div id="example_wrapper" class="dataTables_wrapper">
                        <div class="dataTables_length" id="example_length"><label>Show <select name="example_length" aria-controls="example" class=""><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option></select> entries</label></div><div id="example_filter" class="dataTables_filter"><label>Search:<input type="search" class="" placeholder="" aria-controls="example"></label></div><table id="example" class="display dataTable" cellspacing="0" width="100%" role="grid" aria-describedby="example_info" style="width: 100%;">
                            <thead>
                                <tr role="row"><th class="sorting_asc" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 49px;">Name</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 58px;">Position</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Office: activate to sort column ascending" style="width: 46px;">Office</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Age: activate to sort column ascending" style="width: 27px;">Age</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Start date: activate to sort column ascending" style="width: 34px;">Start date</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Salary: activate to sort column ascending" style="width: 67px;">Salary</th></tr>
                            </thead>
                            <tfoot>
                                <tr><th rowspan="1" colspan="1">Name</th><th rowspan="1" colspan="1">Position</th><th rowspan="1" colspan="1">Office</th><th rowspan="1" colspan="1">Age</th><th rowspan="1" colspan="1">Start date</th><th rowspan="1" colspan="1">Salary</th></tr>
                            </tfoot>
                            <tbody>
                                <tr role="row" class="odd">
                                    <td data-search="Quinn Flynn" class="sorting_1">Q. Flynn</td>
                                    <td>Support Lead</td>
                                    <td>Edinburgh</td>
                                    <td>22</td>
                                    <td data-order="1362268800">Sun 3rd Mar 13</td>
                                    <td data-order="342000">$342,000/y</td>
                                </tr>
                                <tr role="row" class="even">
                                    <td data-search="Rhona Davidson" class="sorting_1">R. Davidson</td>
                                    <td>Integration Specialist</td>
                                    <td>Tokyo</td>
                                    <td>55</td>
                                    <td data-order="1287010800">Thu 14th Oct 10</td>
                                    <td data-order="327900">$327,900/y</td>
                                </tr>
                                <tr role="row" class="odd">
                                    <td data-search="Serge Baldwin" class="sorting_1">S. Baldwin</td>
                                    <td>Data Coordinator</td>
                                    <td>Singapore</td>
                                    <td>64</td>
                                    <td data-order="1333926000">Mon 9th Apr 12</td>
                                    <td data-order="138575">$138,575/y</td>
                                </tr>
                                <tr role="row" class="even">
                                    <td data-search="Suki Burks" class="sorting_1">S. Burks</td>
                                    <td>Developer</td>
                                    <td>London</td>
                                    <td>53</td>
                                    <td data-order="1256166000">Thu 22nd Oct 09</td>
                                    <td data-order="114500">$114,500/y</td>
                                </tr>
                                <tr role="row" class="odd">
                                    <td data-search="Shad Decker" class="sorting_1">S. Decker</td>
                                    <td>Regional Director</td>
                                    <td>Edinburgh</td>
                                    <td>51</td>
                                    <td data-order="1226534400">Thu 13th Nov 08</td>
                                    <td data-order="183000">$183,000/y</td>
                                </tr>
                                <tr role="row" class="even">
                                    <td data-search="Sonya Frost" class="sorting_1">S. Frost</td>
                                    <td>Software Engineer</td>
                                    <td>Edinburgh</td>
                                    <td>23</td>
                                    <td data-order="1229126400">Sat 13th Dec 08</td>
                                    <td data-order="103600">$103,600/y</td>
                                </tr>
                                <tr role="row" class="odd">
                                    <td data-search="Shou Itou" class="sorting_1">S. Itou</td>
                                    <td>Regional Marketing</td>
                                    <td>Tokyo</td>
                                    <td>20</td>
                                    <td data-order="1313276400">Sun 14th Aug 11</td>
                                    <td data-order="163000">$163,000/y</td>
                                </tr>
                                <tr role="row" class="even">
                                    <td data-search="Sakura Yamamoto" class="sorting_1">S. Yamamoto</td>
                                    <td>Support Engineer</td>
                                    <td>Tokyo</td>
                                    <td>37</td>
                                    <td data-order="1250636400">Wed 19th Aug 09</td>
                                    <td data-order="139575">$139,575/y</td>
                                </tr>
                                <tr role="row" class="odd">
                                    <td data-search="Tatyana Fitzpatrick" class="sorting_1">T. Fitzpatrick</td>
                                    <td>Regional Director</td>
                                    <td>London</td>
                                    <td>19</td>
                                    <td data-order="1268784000">Wed 17th Mar 10</td>
                                    <td data-order="385750">$385,750/y</td>
                                </tr>
                                <tr role="row" class="even">
                                    <td data-search="Timothy Mooney" class="sorting_1">T. Mooney</td>
                                    <td>Office Manager</td>
                                    <td>London</td>
                                    <td>37</td>
                                    <td data-order="1228953600">Thu 11th Dec 08</td>
                                    <td data-order="136200">$136,200/y</td>
                                </tr>
                            </tbody>
                        </table><div class="dataTables_info" id="example_info" role="status" aria-live="polite">Showing 41 to 50 of 57 entries</div><div class="dataTables_paginate paging_simple_numbers" id="example_paginate"><a class="paginate_button previous" aria-controls="example" data-dt-idx="0" tabindex="0" id="example_previous">Previous</a><span><a class="paginate_button " aria-controls="example" data-dt-idx="1" tabindex="0">1</a><a class="paginate_button " aria-controls="example" data-dt-idx="2" tabindex="0">2</a><a class="paginate_button " aria-controls="example" data-dt-idx="3" tabindex="0">3</a><a class="paginate_button " aria-controls="example" data-dt-idx="4" tabindex="0">4</a><a class="paginate_button current" aria-controls="example" data-dt-idx="5" tabindex="0">5</a><a class="paginate_button " aria-controls="example" data-dt-idx="6" tabindex="0">6</a></span><a class="paginate_button next" aria-controls="example" data-dt-idx="7" tabindex="0" id="example_next">Next</a></div>
                    </div>

                </div>
                <span class="gs-resize-handle gs-resize-handle-both"></span>
            </li>
            <li data-row="9" data-col="8" data-sizex="17" data-sizey="8" class="gs-w" style="display: visible;">
                <div class="content1" style="width: 99%;height: 99%; margin-left:5px; margin-top:20px;">
                    <div id="example_wrapper" class="dataTables_wrapper">
                        <div class="dataTables_length" id="example_length"><label>Show <select name="example_length" aria-controls="example" class=""><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option></select> entries</label></div><div id="example_filter" class="dataTables_filter"><label>Search:<input type="search" class="" placeholder="" aria-controls="example"></label></div><table id="example" class="display dataTable" cellspacing="0" width="100%" role="grid" aria-describedby="example_info" style="width: 100%;">
                            <thead>
                                <tr role="row"><th class="sorting_asc" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-sort="ascending" aria-label="Name: activate to sort column descending" style="width: 49px;">Name</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 58px;">Position</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Office: activate to sort column ascending" style="width: 46px;">Office</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Age: activate to sort column ascending" style="width: 27px;">Age</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Start date: activate to sort column ascending" style="width: 34px;">Start date</th><th class="sorting" tabindex="0" aria-controls="example" rowspan="1" colspan="1" aria-label="Salary: activate to sort column ascending" style="width: 67px;">Salary</th></tr>
                            </thead>
                            <tfoot>
                                <tr><th rowspan="1" colspan="1">Name</th><th rowspan="1" colspan="1">Position</th><th rowspan="1" colspan="1">Office</th><th rowspan="1" colspan="1">Age</th><th rowspan="1" colspan="1">Start date</th><th rowspan="1" colspan="1">Salary</th></tr>
                            </tfoot>
                            <tbody>
                                <tr role="row" class="odd">
                                    <td data-search="Quinn Flynn" class="sorting_1">Q. Flynn</td>
                                    <td>Support Lead</td>
                                    <td>Edinburgh</td>
                                    <td>22</td>
                                    <td data-order="1362268800">Sun 3rd Mar 13</td>
                                    <td data-order="342000">$342,000/y</td>
                                </tr>
                                <tr role="row" class="even">
                                    <td data-search="Rhona Davidson" class="sorting_1">R. Davidson</td>
                                    <td>Integration Specialist</td>
                                    <td>Tokyo</td>
                                    <td>55</td>
                                    <td data-order="1287010800">Thu 14th Oct 10</td>
                                    <td data-order="327900">$327,900/y</td>
                                </tr>
                                <tr role="row" class="odd">
                                    <td data-search="Serge Baldwin" class="sorting_1">S. Baldwin</td>
                                    <td>Data Coordinator</td>
                                    <td>Singapore</td>
                                    <td>64</td>
                                    <td data-order="1333926000">Mon 9th Apr 12</td>
                                    <td data-order="138575">$138,575/y</td>
                                </tr>
                                <tr role="row" class="even">
                                    <td data-search="Suki Burks" class="sorting_1">S. Burks</td>
                                    <td>Developer</td>
                                    <td>London</td>
                                    <td>53</td>
                                    <td data-order="1256166000">Thu 22nd Oct 09</td>
                                    <td data-order="114500">$114,500/y</td>
                                </tr>
                                <tr role="row" class="odd">
                                    <td data-search="Shad Decker" class="sorting_1">S. Decker</td>
                                    <td>Regional Director</td>
                                    <td>Edinburgh</td>
                                    <td>51</td>
                                    <td data-order="1226534400">Thu 13th Nov 08</td>
                                    <td data-order="183000">$183,000/y</td>
                                </tr>
                                <tr role="row" class="even">
                                    <td data-search="Sonya Frost" class="sorting_1">S. Frost</td>
                                    <td>Software Engineer</td>
                                    <td>Edinburgh</td>
                                    <td>23</td>
                                    <td data-order="1229126400">Sat 13th Dec 08</td>
                                    <td data-order="103600">$103,600/y</td>
                                </tr>
                                <tr role="row" class="odd">
                                    <td data-search="Shou Itou" class="sorting_1">S. Itou</td>
                                    <td>Regional Marketing</td>
                                    <td>Tokyo</td>
                                    <td>20</td>
                                    <td data-order="1313276400">Sun 14th Aug 11</td>
                                    <td data-order="163000">$163,000/y</td>
                                </tr>
                                <tr role="row" class="even">
                                    <td data-search="Sakura Yamamoto" class="sorting_1">S. Yamamoto</td>
                                    <td>Support Engineer</td>
                                    <td>Tokyo</td>
                                    <td>37</td>
                                    <td data-order="1250636400">Wed 19th Aug 09</td>
                                    <td data-order="139575">$139,575/y</td>
                                </tr>
                                <tr role="row" class="odd">
                                    <td data-search="Tatyana Fitzpatrick" class="sorting_1">T. Fitzpatrick</td>
                                    <td>Regional Director</td>
                                    <td>London</td>
                                    <td>19</td>
                                    <td data-order="1268784000">Wed 17th Mar 10</td>
                                    <td data-order="385750">$385,750/y</td>
                                </tr>
                                <tr role="row" class="even">
                                    <td data-search="Timothy Mooney" class="sorting_1">T. Mooney</td>
                                    <td>Office Manager</td>
                                    <td>London</td>
                                    <td>37</td>
                                    <td data-order="1228953600">Thu 11th Dec 08</td>
                                    <td data-order="136200">$136,200/y</td>
                                </tr>
                            </tbody>
                        </table><div class="dataTables_info" id="example_info" role="status" aria-live="polite">Showing 41 to 50 of 57 entries</div><div class="dataTables_paginate paging_simple_numbers" id="example_paginate"><a class="paginate_button previous" aria-controls="example" data-dt-idx="0" tabindex="0" id="example_previous">Previous</a><span><a class="paginate_button " aria-controls="example" data-dt-idx="1" tabindex="0">1</a><a class="paginate_button " aria-controls="example" data-dt-idx="2" tabindex="0">2</a><a class="paginate_button " aria-controls="example" data-dt-idx="3" tabindex="0">3</a><a class="paginate_button " aria-controls="example" data-dt-idx="4" tabindex="0">4</a><a class="paginate_button current" aria-controls="example" data-dt-idx="5" tabindex="0">5</a><a class="paginate_button " aria-controls="example" data-dt-idx="6" tabindex="0">6</a></span><a class="paginate_button next" aria-controls="example" data-dt-idx="7" tabindex="0" id="example_next">Next</a></div>
                    </div>

                </div>
                <span class="gs-resize-handle gs-resize-handle-both"></span>
            </li>
        </ul>
    </div>



    <script type="text/javascript" charset="utf-8" src="./gridster.js_files/jquery.js"></script>
    <script type="text/javascript" charset="utf-8" src="./gridster.js_files/jquery.gridster.js"></script>
    <script type="text/javascript" charset="utf-8" src="./gridster.js_files/jquery.mousewheel.js"></script>

    <script type="text/javascript">
        var gridster;
        var setScale = null;
        $(function () {
            gridster = $("#ulGridster").gridster({
                widget_base_dimensions: [55, 55],
                widget_margins: [5, 5],
                autogrow_cols: true,
                autogrow_rows: true,
                scale: scale,
                resize: {
                    enabled: true
                },
                on_element_activated: function (args, ui) {
                    //console.warn(this, args, ui);
                    var div = $("#divGridster");
                    var el = $(this);
                    var off = gridster.$el.offset();
                    var pos = { top: parseInt(gridster.$el.css("top")), left: parseInt(gridster.$el.css("left")) };

                    var divWidth = div.width();
                    var elWidth = el.width();
                    var elLeft = (el.offset().left - off.left) / scale;
                    var left = divWidth / 2 - (elLeft + elWidth / 2) - pos.left;
                    //console.warn(pos);

                    var divHeight = div.height();
                    var elHeight = el.height();
                    var elTop = (el.offset().top - off.top) / scale;
                    var top = divHeight / 2 - (elTop + elHeight / 2) - pos.top;
                    
                    setScale(1, left, top);
                }
            }).data('gridster');

            var scale = 1, zoomRate = 1.3

            $(".gridster").on("mousewheel", function (e, a) {

                var delta = e.deltaY + e.deltaX;
                var rate = zoomRate * Math.abs(delta);
                var newScale = delta > 0 ? scale / rate : scale * rate;

                var el = $("#fantom");
                var offset = el.offset();
                var offsetLeft = offset.left;
                var offsetTop = offset.top;
                var width = el.width();
                var height = el.height();
                var x = e.clientX;
                var y = e.clientY;

                var tagleft = parseFloat($("#fantom").css("left"));
                var tagtop = parseFloat($("#fantom").css("top"));

                var cleft = offsetLeft - $("#divGridster").offset().left + (x - offsetLeft) - 1;
                var ctop = offsetTop - $("#divGridster").offset().top + (y - offsetTop) - 1;

                var left = -((width - width * newScale) * 0.5) + cleft - (x - offsetLeft) * newScale / scale - tagleft;
                var top = -((height - height * newScale) * 0.5) + ctop - (y - offsetTop) * newScale / scale - tagtop;

                setScale(newScale, left, top);
            });

            setScale = function (newScale, left, top) {
                $("#fantom").css("transform", "translate(" + (left) + "px, " + (top) + "px) scale(" + newScale + ") ");
                $("#ulGridster").css("transform", "translate(" + (left) + "px, " + (top) + "px) scale(" + newScale + ") ");

                scale = newScale;
                gridster.set_scale(scale);
            };

            $(".gridster").height($(window).height() - $(".gridster").offset().top - 50);
            $(".gridster").movable({
                onMove: function () {
                    gridster.cover_all();
                }
            });
        });

        $.fn.movable = function (options) {
            return this.each(function () {
                options = $.extend({}, options);
                var $el = $(this);
                var $ch = $el.find(">*");
                $ch.css('left', 0);
                $ch.css('top', 0);
                var dragging = false;
                var startY = 0;
                var startX = 0;
                var oldTop = 0;
                var oldLeft = 0;
                $el.mousedown(function (ev) {
                    if (ev.which != 3)
                        return;
                    ev.preventDefault();
                    dragging = true;
                    startY = ev.clientY;
                    startX = ev.clientX;
                    oldLeft = $ch.css('left');
                    oldTop = $ch.css('top');
                }).on("contextmenu", function () {
                    return false;
                });
                $(window).mousemove(function (ev) {
                    if (dragging) {
                        var newTop = parseInt(oldTop) + (ev.clientY - startY);
                        var newLeft = parseInt(oldLeft) + (ev.clientX - startX);

                        $ch.addClass("move");
                        $ch.css('left', newLeft);
                        $ch.css('top', newTop);

                        if (typeof options.onMove == "function") {
                            options.onMove.call($el);
                        }
                    }
                }).mouseup(function (ev) {
                    dragging = false;
                    $ch.removeClass("move");
                });
            });
        }

        $(window).resize(function () {
            $(".gridster").height($(window).height() - $(".gridster").offset().top - 50);
        });

    </script>
</body>
</html>